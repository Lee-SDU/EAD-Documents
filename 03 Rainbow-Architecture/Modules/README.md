## 模块及流程

![流程](..\images\modules-process.png)

> 备注：如下描述的模块路径中不以“/”结尾的都为 .js 后缀的文件，为了便于抽象描述予以省略，例如：src/rainbow 在源码结构中为 src/rainbow.js 文件。以“/”结尾表示目录包。

### 1. 基础应用
包含框架入口、全局应用容器定义，全局模块加载及初始化。

#### Rainbow（框架入口）
模块路径：```src/rainbow```

加载框架全局类库（Backbone、jQuery）和启动模块。

#### Boot（启动模块）
模块路径：```src/boot```

加载应用容器、导航和判断执行登录模块。

#### App（应用容器）
模块路径：```src/base/app```

定义全局方法和变量，初始化路由器和浏览器变化监听。在框架内部可以通过 ```rainbow``` 命名空间调用应用容器内的所有属性和方法。

#### Nav（导航模块）
模块路径：```src/base/nav```

资源导航，请求应用资源 API，渲染导航菜单并注册和监听资源路由，初始化应用布局容器。根据用户的前端交互事件，监听回调方法根据资源类型执行视图模型初始化。

### 2. 视图
支持多实例的单元业务模块组件，通过导航模块初始化后对服务端 API 发起请求，服务端返回视图 API 数据后根据返回的视图定义和业务数据实时渲染当前业务模块的交互界面。

#### Model（视图模型）
模块路径：```src/view/model```

根据 URL 参数请求向服务端 API 请求并响应数据，注册并监听视图过滤器，根据过滤器模型的变化主动向服务端发起数据更新请求。服务端返回数据成功后根据视图定义数据实例化相应的视图，执行视图渲染后将视图追加到应用布局容器。

#### Base（基础抽象视图）
模块路径：```src/view/base```

视图组件基础抽象，实现了视图高度设置、显示、隐藏、销毁等通用或生命周期管理方法供普通视图扩展开发使用。

#### Standard（标准视图）
模块路径：```src/view/standard```

标准数据管理视图，根据模型视图数据定义组合动作栏、过滤器栏、设置栏、数据列表、状态栏、分页栏、辅助视图等基础交互组件动态构建并渲染单元业务模块的用户交互界面。

#### Aid（辅助视图）
模块路径：```src/view/aid```

结合视图动作辅助完成数据录入或局部数据内容渲染的辅助类视图抽象，通常在复杂视图动作场景以嵌套的方式加载到标准数据管理视图中使用。

### 3. 通用模块和基础组件

#### Components（组件包）
包路径：```src/components/```

通用交互界面基础组件包，一般通过组合多个基础组件构建应用视图，包括基础抽象、列表组件、表单组件、表单控制器组件、编辑器组件、页面小组件。

#### Utility（工具包）
包路径：```src/utility/```

通用工具模块，包括 Cookie、下钻、模式窗口、链接、全屏等辅助操作模块，可以在具体的业务场景中依赖复用。

#### Common（通用业务模块包）
包路径：```src/common/```

全局或通用业务模块包，包括登录、注销、通知等模块。

#### Theme（主题包）
包路径：```src/theme/```

应用主题皮肤模块包，目前内置 ```classic``` 和 ```tech``` 主题，可以通过扩展开发 CSS 和 Template 实现自定义主题扩展。
