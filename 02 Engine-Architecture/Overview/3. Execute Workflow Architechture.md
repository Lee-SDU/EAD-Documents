### 引擎执行流程架构

![PNG](..\images\4.png)

### 引擎执行原则及模式

- 统一入口：所有的请求统一由路由接管；
- 统一出口：所有的请求的输出由路由统一输出；
- 工厂模式：由工厂进行根据参数的不同返回不同类的实例；

### 1、Client Request

首先由客户端发起请求，客户端包括浏览器、移动设备、API请求等；

### 2、Router

引擎收到请求，有路由模块进行请求分发，转交给不同模块；

### 3、ViewFactory

视图工厂收到获取视图或视图动作请求构建视图，或者交于视图动作工厂进行动作处理；

### 4、QueryFactory

视图工厂在构建视图时，通过查询工厂处理数据查询业务。

查询类型包括**默认查询**和**扩展查询**；

- 默认查询是指通用查询，无需扩展编码即可获取数据；
- 扩展查询是针对于特殊业务而构建的查询程序，需要通过编码处理查询业务后返回数据；

### 5、ActionFactory

视图动作工厂处理由视图工厂发起的视图动作请求，处理完成后返回执行结果。

视图动作类型包括**通用视图动作**及**扩展视图动作**；

- 通用视图动作是指 EAD 平台本身自带的一些对操作进行处理的方法，包括增加、删除、修改等；
- 扩展视图动作是指针对特殊业务而扩展开发的对操作进行处理的方法；

### 6、Model

视图工厂、视图动作、查询工厂都需要依赖于模型模块获取数据库数据；

### 7、RenderFactory & Render

视图工厂返回的数据由渲染工厂进行统一渲染，然后按照输入的规则由路由输出到到客户端；



