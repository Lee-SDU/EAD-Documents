### 动作工厂时序图

动作工厂时序图如下所示：

![PNG](..\..\images\11.png)
![PNG](..\..\images\Action Factory.png)

#### 1. 视图动作工厂（Factory）

视图动作工厂构建 ActionContext，构建好后交由视图动作执行器进行视图动作执行；

#### 2. 视图动作执行器（Executor）

视图动作执行器通过递归调用视图动作方法，执行操作；

- create : 调用视图新增动作，递归新增父子数据；
- update : 调用视图更新动作，递归更新父子数据；
- delete : 调用视图删除动作，递归删除父子数据；
- action : 调用视图特殊动作，执行操作，改操作只需调用驱动，无需递归；

#### 3. 视图动作（Common）

视图动作包括通用的增、删、改及特殊操作；

- create ： 若为通用新增操作，则直接进行数据新增；若配置了视图动作驱动，则调用视图动作驱动执行新增操作；
- update ： 若为通用更新操作，则直接进行数据更新；若配置了视图动作驱动，则调用视图动作驱动执行更新操作；
- delete ： 若为通用删除操作，则直接进行数据删除；若配置了视图动作驱动，则调用视图动作驱动执行删除操作；
- action ： 调用视图动作驱动执行特殊操作；

#### 4. 驱动工厂（DriverFactory）

视图动作驱动为新增、更新、删除、特殊操作提供驱动，通过执行特殊驱动进行程序扩展，实现复杂业务；

驱动工厂是基于 Spring + Java 反射机制实现其运转，开发人员按规范开发完成相关类后，为该类配置注解，在程序启动时，加入 Spring Bean 容器，在驱动工厂中，通过注解名称获取 Bean，然后通过反射方式执行其中的方法；



