## 平台架构

![平台架构](..\images\platform-architecture.png)

### 模型层

模型层为平台的基础数据定义层，负责业务逻辑的定义和描述，处于 EAD 引擎。

#### 元数据（Meta Type）

EAD 引擎定义的平台元数据类型，平台根据不同的数据源映射对应的数据类型，在 EAD 运行时生命周期内遵循数据库不可知论原则，参考如下元数据类型：

- **Boolean**，布尔值;
- **String**，字符串;
- **Text**，文本;
- **Integer**，整数;
- **Number**，数字;
- **Time**，时间;
- **JSON** JSON 对象;
- **Array** JSON 数字;
- **Key**，键值;
- **Binary**，二进制;

#### 数据类型（Data Type）

基于元数据类型扩展的基本数据类型，以满足业务模型数据校验规则，允许开发者自定义数据类型。EAD 平台已内置 30 余种常用数据类型，详细的数据类型列表请参考《平台附录参考》。

#### 模型（Model）

单元数据定义，基于 OOP 完全面向对象的编程设计思想，将所有业务单元按照对象模型进行设计。模型可以添加不同数据类型的属性或已经创建的模型作为其成员。通过模型对象来定义业务单元，模型是整个 EAD 平台的核心业务接口定义，基于模型实现实体（一般指数据库表）创建、数据查询、数据操作、视图 API 提供等核心模块，各个模块依赖于模型进行互相之间的匹配和协作。

#### 数据集模型（Collection）

模型可以以集合模式添加为其它模型的子成员，以支持一对多或多对多关系模型的设计。

### 视图模型层

视图模型层作为平台的 API 服务提供层，负责数据访问权限、数据操作、数据过滤器的配置和管理。视图模型层完成数据逻辑的组织后将模型范式、动作配置、过滤器配置、业务数据以 API 的形式提供给访问者。视图模型层处于 EAD 引擎。

#### 范式（Schema）

模型属性详细描述数据，提供给客户端作为数据和操作表单动态渲染和校验的依据。

#### 动作（Action）

基于视图进行绑定模型的数据操作，通过驱动设置、规则设置和 HTTP 方法实现复杂场景的数据操作配置开发。

#### 过滤器（Filter）

基于视图属性组合设置实现数据过滤，支持排序和条件类型，不同类型条件（相等、包含、区间、不等于、相似）支持，设置合适的表单交互控件。

#### 子视图（Subview）

支持递归嵌套方式访问子视图，以实现多级嵌套业务的导航和管理。

### API

平台采用完全面向 Restful 风格的 API 进行设计开发，服务引擎与用户交互界面完全分离，Rainbow 通过 EAD 引擎 API 提供的数据动态渲染用户交互界面。API 属于 EAD 引擎与 Rainbow 的对接层，由 Rainbow 采用 Ajax 的方式向 EAD 引擎发起数据访问或操作请求，EAD 引擎以 JSON 的形式返回响应数据或消息。

### 视图层

视图层处于 Rainbow，根据 Ajax 请求返回的 API 数据进行应用通用视图渲染、客户端路由导航，根据模型定义和主题模板动态渲染业务模块视图、表单等用户交互界面。 

### 应用资源

应用层处于 EAD 引擎，支持多实例创建应用，按照各应用进行多视图的资源化配置管理，分应用创建应用角色，进行角色资源授权和用户角色分配。根据应用层角色进行用户鉴权和 API 对外提供。